<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Kajiki Text Templates" href="text-templates.html" /><link rel="prev" title="Kajiki Templating Basics" href="templating-basics.html" />

    <link rel="shortcut icon" href="_static/favicon.ico"/><!-- Generated with Sphinx 8.2.3 and Furo 2024.08.06 -->
        <title>Kajiki XML Templates - Kajiki 1.0.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Kajiki 1.0.2 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/marlin.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Kajiki 1.0.2 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="templating-basics.html">Kajiki Templating Basics</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Kajiki XML Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="text-templates.html">Kajiki Text Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="migrating_from_genshi.html">Migrating from Genshi</a></li>
<li class="toctree-l1"><a class="reference internal" href="i18n.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime.html">Kajiki Runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">CHANGES</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/jackrosenthal/kajiki/blob/master/docs/xml-templates.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/jackrosenthal/kajiki/edit/master/docs/xml-templates.rst" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="kajiki-xml-templates">
<h1>Kajiki XML Templates<a class="headerlink" href="#kajiki-xml-templates" title="Link to this heading">¶</a></h1>
<p>Kajiki provides a full-featured XML-based template engine that guarantees
well-formed output when generating HTML and XML.  This document describes that
language.  Templates are XML files that include template directives that control
how the template is rendered and expressions that are substituted into the
generated text at render time.</p>
<p>Please see <a class="reference internal" href="templating-basics.html"><span class="doc">Kajiki Templating Basics</span></a> for general information on embedding Python
code in templates.</p>
<section id="output-modes">
<h2>Output Modes<a class="headerlink" href="#output-modes" title="Link to this heading">¶</a></h2>
<p>Although Kajiki XML templates must be well-formed XML documents, Kajiki is capable of
rendering HTML or XML.  By default, Kajiki will inspect the doctype of the
template to determine how to render:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tpl_text</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;&lt;!DOCTYPE html&gt;</span>
<span class="gp">... </span><span class="s1">&lt;html&gt;</span>
<span class="gp">... </span><span class="s1">    &lt;head&gt;&lt;!-- Some stuff here --&gt;&lt;/head&gt;</span>
<span class="gp">... </span><span class="s1">    &lt;body&gt;</span>
<span class="gp">... </span><span class="s1">        &lt;form&gt;</span>
<span class="gp">... </span><span class="s1">            &lt;input type=&quot;checkbox&quot; checked=&quot;checked&quot;/&gt;</span>
<span class="gp">... </span><span class="s1">            &lt;select&gt;</span>
<span class="gp">... </span><span class="s1">                &lt;option selected=&quot;selected&quot;&gt;One&lt;/option&gt;</span>
<span class="gp">... </span><span class="s1">                &lt;option&gt;Two&lt;/option&gt;</span>
<span class="gp">... </span><span class="s1">                &lt;option&gt;Three&lt;/option&gt;</span>
<span class="gp">... </span><span class="s1">            &lt;/select&gt;</span>
<span class="gp">... </span><span class="s1">        &lt;/form&gt;</span>
<span class="gp">... </span><span class="s1">    &lt;/body&gt;</span>
<span class="gp">... </span><span class="s1">&lt;/html&gt;&#39;&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">kajiki</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="n">tpl_text</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
<span class="go">&lt;!DOCTYPE html&gt;</span>
<span class="go">&lt;html&gt;</span>
<span class="go">    &lt;head&gt;&lt;!--  Some stuff here  --&gt;&lt;/head&gt;</span>
<span class="go">    &lt;body&gt;</span>
<span class="go">        &lt;form&gt;</span>
<span class="go">            &lt;input checked type=&quot;checkbox&quot;&gt;</span>
<span class="go">            &lt;select&gt;</span>
<span class="go">                &lt;option selected&gt;One&lt;/option&gt;</span>
<span class="go">                &lt;option&gt;Two&lt;/option&gt;</span>
<span class="go">                &lt;option&gt;Three&lt;/option&gt;</span>
<span class="go">            &lt;/select&gt;</span>
<span class="go">        &lt;/form&gt;</span>
<span class="go">    &lt;/body&gt;</span>
<span class="go">&lt;/html&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># If we want to override the detected type, we can pass a &#39;mode&#39; param</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="n">tpl_text</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;xml&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
<span class="go">&lt;!DOCTYPE html&gt;</span>
<span class="go">&lt;html&gt;</span>
<span class="go">    &lt;head&gt;&lt;!--  Some stuff here  --&gt;&lt;/head&gt;</span>
<span class="go">    &lt;body&gt;</span>
<span class="go">        &lt;form&gt;</span>
<span class="go">            &lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot;/&gt;</span>
<span class="go">            &lt;select&gt;</span>
<span class="go">                &lt;option selected=&quot;selected&quot;&gt;One&lt;/option&gt;</span>
<span class="go">                &lt;option&gt;Two&lt;/option&gt;</span>
<span class="go">                &lt;option&gt;Three&lt;/option&gt;</span>
<span class="go">            &lt;/select&gt;</span>
<span class="go">        &lt;/form&gt;</span>
<span class="go">    &lt;/body&gt;</span>
<span class="go">&lt;/html&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># We can also omit the generated DOCTYPE by specifying the template</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># is a fragment</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="n">tpl_text</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;xml&#39;</span><span class="p">,</span> <span class="n">is_fragment</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
<span class="go">&lt;html&gt;</span>
<span class="go">    &lt;head&gt;&lt;!--  Some stuff here  --&gt;&lt;/head&gt;</span>
<span class="go">    &lt;body&gt;</span>
<span class="go">        &lt;form&gt;</span>
<span class="go">            &lt;input checked=&quot;checked&quot; type=&quot;checkbox&quot;/&gt;</span>
<span class="go">            &lt;select&gt;</span>
<span class="go">                &lt;option selected=&quot;selected&quot;&gt;One&lt;/option&gt;</span>
<span class="go">                &lt;option&gt;Two&lt;/option&gt;</span>
<span class="go">                &lt;option&gt;Three&lt;/option&gt;</span>
<span class="go">            &lt;/select&gt;</span>
<span class="go">        &lt;/form&gt;</span>
<span class="go">    &lt;/body&gt;</span>
<span class="go">&lt;/html&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In Kajiki, you can use normal XML comments, and the comments will exist in the
generated markup.  If you wish the comments to be removed before rendering the
document, you can begin the comment with the syntax <cite>&lt;!–!</cite> instead of <cite>&lt;!–</cite>:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;&lt;div&gt;</span>
<span class="gp">... </span><span class="s1">&lt;!-- This comment is preserved.</span>
<span class="gp">... </span><span class="s1">--&gt;&lt;!--! This comment is stripped. --&gt;</span>
<span class="gp">... </span><span class="s1">&lt;/div&gt;&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;</span>
<span class="go">&lt;!--  This comment is preserved.</span>
<span class="go"> --&gt;</span>
<span class="go">&lt;/div&gt;</span>
</pre></div>
</div>
</div>
</section>
<section id="basic-expressions">
<h2>Basic Expressions<a class="headerlink" href="#basic-expressions" title="Link to this heading">¶</a></h2>
<p>Let’s start with a hello world template:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&lt;div&gt;Hello, $name!&lt;/div&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;world&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;Hello, world!&lt;/div&gt;</span>
</pre></div>
</div>
<p>By default, the $-syntax picks up any identifiers following it, as well as any
periods.  If you want something more explicit, use the extended expression form
as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&lt;div&gt;Hello, 2+2 is ${2+2}&lt;/div&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;Hello, 2+2 is 4&lt;/div&gt;</span>
</pre></div>
</div>
<p>If you wish to include a literal $, simply double it:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&lt;div&gt;The price is $$$</span><span class="si">{price}</span><span class="s1">&lt;/div&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">price</span><span class="o">=</span><span class="s1">&#39;5.00&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;The price is $5.00&lt;/div&gt;</span>
</pre></div>
</div>
<p>You can also include expressions in template attributes:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&lt;div id=&quot;$foo&quot;&gt;Bar&lt;/div&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="s1">&#39;baz&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div id=&quot;baz&quot;&gt;Bar&lt;/div&gt;</span>
</pre></div>
</div>
</section>
<section id="control-flow">
<h2>Control Flow<a class="headerlink" href="#control-flow" title="Link to this heading">¶</a></h2>
<p>Kajiki provides several directives that affect the rendering of a template.  This
section describes the various directives.  Directives in text templates can
either appear as special attributes on tags prefixed by <cite>py:</cite> or as standalone
tags whose tagname is prefixed by <cite>py:</cite>.</p>
<section id="py-if-py-else">
<h3>py:if, py:else<a class="headerlink" href="#py-if-py-else" title="Link to this heading">¶</a></h3>
<p>Only render the enclosed content if the expression evaluates to a truthy value:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&lt;div&gt;&lt;py:if test=&quot;foo&quot;&gt;bar&lt;/py:if&gt;&lt;py:else&gt;baz&lt;/py:else&gt;&lt;/div&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;bar&lt;/div&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;baz&lt;/div&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&lt;div&gt;&lt;span py:if=&quot;foo&quot;&gt;bar&lt;/span&gt;&lt;/div&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;&lt;span&gt;bar&lt;/span&gt;&lt;/div&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">foo</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;&lt;/div&gt;</span>
</pre></div>
</div>
</section>
<section id="py-switch-py-case-py-else">
<h3>py:switch, py:case, py:else<a class="headerlink" href="#py-switch-py-case-py-else" title="Link to this heading">¶</a></h3>
<p>Perform multiple tests to render one of several alternatives.  The first matching
<cite>case</cite> is rendered, and if no <cite>case</cite> matches, the <cite>else</cite> branch is rendered:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;&lt;div&gt;</span>
<span class="gp">... </span><span class="s1">$i is &lt;py:switch test=&quot;i % 2&quot;&gt;</span>
<span class="gp">... </span><span class="s1">&lt;py:case value=&quot;0&quot;&gt;even&lt;/py:case&gt;</span>
<span class="gp">... </span><span class="s1">&lt;py:else&gt;odd&lt;/py:else&gt;</span>
<span class="gp">... </span><span class="s1">&lt;/py:switch&gt;&lt;/div&gt;&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;</span>
<span class="go">4 is even&lt;/div&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;</span>
<span class="go">3 is odd&lt;/div&gt;</span>
</pre></div>
</div>
</section>
<section id="py-match-py-case">
<h3>py:match, py:case<a class="headerlink" href="#py-match-py-case" title="Link to this heading">¶</a></h3>
<p>Similar to <code class="docutils literal notranslate"><span class="pre">py:switch</span></code> this makes use of <a class="reference external" href="https://peps.python.org/pep-0622/">PEP622</a>
Structural Pattern Matching:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span><span class="o">,</span><span class="w"> </span><span class="nn">pytest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&lt;</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span> <span class="n">pytest</span><span class="o">.</span><span class="n">skip</span><span class="p">(</span><span class="s1">&#39;pep622 unsupported&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;&lt;div&gt;</span>
<span class="gp">... </span><span class="s1">$i is &lt;py:match on=&quot;i % 2&quot;&gt;</span>
<span class="gp">... </span><span class="s1">&lt;py:case match=&quot;0&quot;&gt;even&lt;/py:case&gt;</span>
<span class="gp">... </span><span class="s1">&lt;py:case match=&quot;_&quot;&gt;odd&lt;/py:case&gt;</span>
<span class="gp">... </span><span class="s1">&lt;/py:match&gt;&lt;/div&gt;&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;</span>
<span class="go">4 is even&lt;/div&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;</span>
<span class="go">3 is odd&lt;/div&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">py:match</span></code> compiles directly to Python’s <code class="docutils literal notranslate"><span class="pre">match</span></code> syntax, and will
therefore not work on versions less than 3.10.  Only use this syntax if your
project targets Python 3.10 or newer.</p>
</div>
</section>
<section id="py-for">
<h3>py:for<a class="headerlink" href="#py-for" title="Link to this heading">¶</a></h3>
<p>Repeatedly render the content for each item in an iterable:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;&lt;ul&gt;</span>
<span class="gp">... </span><span class="s1">&lt;li py:for=&quot;x in range(sz)&quot;&gt;$x&lt;/li&gt;</span>
<span class="gp">... </span><span class="s1">&lt;/ul&gt;&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">sz</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;ul&gt;</span>
<span class="go">&lt;li&gt;0&lt;/li&gt;&lt;li&gt;1&lt;/li&gt;&lt;li&gt;2&lt;/li&gt;</span>
<span class="go">&lt;/ul&gt;</span>
</pre></div>
</div>
</section>
<section id="py-def">
<h3>py:def<a class="headerlink" href="#py-def" title="Link to this heading">¶</a></h3>
<p>Defines a function that can be used elsewhere in the template:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;&lt;div</span>
<span class="gp">... </span><span class="s1">&gt;&lt;py:def function=&quot;evenness(n)&quot;</span>
<span class="gp">... </span><span class="s1">&gt;&lt;py:if test=&quot;n%2==0&quot;&gt;even&lt;/py:if&gt;&lt;py:else&gt;odd&lt;/py:else&gt;&lt;/py:def</span>
<span class="gp">... </span><span class="s1">&gt;&lt;ul&gt;</span>
<span class="gp">... </span><span class="s1">&lt;li py:for=&quot;x in range(sz)&quot;&gt;$x is ${evenness(x)}&lt;/li&gt;</span>
<span class="gp">... </span><span class="s1">&lt;/ul&gt;&lt;/div&gt;&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">sz</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;&lt;ul&gt;</span>
<span class="go">&lt;li&gt;0 is even&lt;/li&gt;&lt;li&gt;1 is odd&lt;/li&gt;&lt;li&gt;2 is even&lt;/li&gt;</span>
<span class="go">&lt;/ul&gt;&lt;/div&gt;</span>
</pre></div>
</div>
</section>
<section id="py-call">
<h3>py:call<a class="headerlink" href="#py-call" title="Link to this heading">¶</a></h3>
<p>Call a function, passing a block of template code as a ‘lambda’ parameter.  Note
that this is a special case of calling when you wish to insert some templated text in the
expansion of a function call.  In normal circumstances, you would just use <cite>${my_function(args)}</cite>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;&lt;div</span>
<span class="gp">... </span><span class="s1">&gt;&lt;py:def function=&quot;quote(caller, speaker)&quot;</span>
<span class="gp">... </span><span class="s1">&gt;&lt;ul&gt;</span>
<span class="gp">... </span><span class="s1">   &lt;li py:for=&quot;i in range(sz)&quot;&gt;Quoth $speaker, ${caller(i)}&lt;/li&gt;</span>
<span class="gp">... </span><span class="s1">&lt;/ul&gt;&lt;/py:def</span>
<span class="gp">... </span><span class="s1">&gt;&lt;py:call args=&quot;n&quot; function=&quot;quote(</span><span class="si">%c</span><span class="s1">aller, &#39;the raven&#39;)&quot;</span>
<span class="gp">... </span><span class="s1">&gt;Nevermore $n&lt;/py:call&gt;&lt;/div&gt;&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">sz</span><span class="o">=</span><span class="mi">3</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;&lt;ul&gt;</span>
<span class="go">   &lt;li&gt;Quoth the raven, Nevermore 0&lt;/li&gt;&lt;li&gt;Quoth the raven, Nevermore 1&lt;/li&gt;&lt;li&gt;Quoth the raven, Nevermore 2&lt;/li&gt;</span>
<span class="go">&lt;/ul&gt;&lt;/div&gt;</span>
</pre></div>
</div>
</section>
<section id="py-include">
<h3>py:include<a class="headerlink" href="#py-include" title="Link to this heading">¶</a></h3>
<p>Includes the text of another template verbatim.  The precise semantics of this
tag depend on the <cite>TemplateLoader</cite> being used, as the <cite>TemplateLoader</cite> is used to
parse the name of the template being included and render its contents into the
current template.  For instance, with the <cite>FileLoader</cite>, you might use the
following:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;py:include</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;path/to/base.txt&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
<p>whereas in the <cite>PackageLoader</cite> you would use</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;py:include</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;package1.package2.base&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
</section>
<section id="py-import">
<h3>py:import<a class="headerlink" href="#py-import" title="Link to this heading">¶</a></h3>
<p>With <cite>py:import</cite>, you can make the functions defined in another template available
without expanding the full template in-place.  Suppose that we saved the
following template in a file <cite>lib.xml</cite>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;py:def</span><span class="w"> </span><span class="na">function=</span><span class="s">&quot;evenness(n)&quot;</span><span class="nt">&gt;</span>
<span class="w">   </span><span class="nt">&lt;py:if</span><span class="w"> </span><span class="na">test=</span><span class="s">&quot;n%2==0&quot;</span><span class="nt">&gt;</span>even<span class="nt">&lt;/py:if&gt;&lt;py:else&gt;</span>odd<span class="nt">&lt;/py:else&gt;</span>
<span class="nt">&lt;/py:def&gt;</span>
</pre></div>
</div>
<p>Then (using the <cite>FileLoader</cite>) we could write a template using the <cite>evenness</cite>
function as follows:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;div&gt;</span>
<span class="w">   </span><span class="nt">&lt;py:import</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;lib.xml&quot;</span><span class="w"> </span><span class="na">alias=</span><span class="s">&quot;lib&quot;</span><span class="nt">/&gt;</span>
<span class="w">   </span><span class="nt">&lt;ul&gt;</span>
<span class="w">      </span><span class="nt">&lt;li</span><span class="w"> </span><span class="na">py:for=</span><span class="s">&quot;i in range(sz)&quot;</span><span class="nt">&gt;</span>$i<span class="w"> </span>is<span class="w"> </span>${lib.evenness(i)}<span class="nt">&lt;/li&gt;</span>
<span class="w">   </span><span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<section id="py-with">
<h4>py:with<a class="headerlink" href="#py-with" title="Link to this heading">¶</a></h4>
<p>Using <cite>py:with</cite>, you can temporarily assign variables values for the extent of
the block:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;&lt;div py:with=&quot;a=&#39;foo&#39;&quot;&gt;</span>
<span class="gp">... </span><span class="s1">&lt;div&gt;$a&lt;/div&gt;</span>
<span class="gp">... </span><span class="s1">&lt;div py:with=&quot;a=5&quot;&gt;$a&lt;/div&gt;</span>
<span class="gp">... </span><span class="s1">&lt;div&gt;$a&lt;/div&gt;</span>
<span class="gp">... </span><span class="s1">&lt;/div&gt;&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;</span>
<span class="go">&lt;div&gt;foo&lt;/div&gt;</span>
<span class="go">&lt;div&gt;5&lt;/div&gt;</span>
<span class="go">&lt;div&gt;foo&lt;/div&gt;</span>
<span class="go">&lt;/div&gt;</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="content-generation">
<h2>Content Generation<a class="headerlink" href="#content-generation" title="Link to this heading">¶</a></h2>
<section id="py-attrs">
<h3>py:attrs<a class="headerlink" href="#py-attrs" title="Link to this heading">¶</a></h3>
<p>With the <cite>py:attrs</cite> custom attribute, you can include dynamic attributes in an
xml/html tag by passing a either a Python dict or a list of pairs:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&lt;div py:attrs=&quot;attrs&quot;/&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;class&#39;</span><span class="p">:</span><span class="s1">&#39;bar&#39;</span><span class="p">}))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div class=&quot;bar&quot; id=&quot;foo&quot;/&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">)]))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div class=&quot;bar&quot; id=&quot;foo&quot;/&gt;</span>
</pre></div>
</div>
<p>Any attribute values that evaluate to <cite>None</cite> will not be emitted in the generated
markup:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&lt;div py:attrs=&quot;attrs&quot;/&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;class&#39;</span><span class="p">:</span><span class="kc">None</span><span class="p">}))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div id=&quot;foo&quot;/&gt;</span>
</pre></div>
</div>
</section>
<section id="py-strip">
<h3>py:strip<a class="headerlink" href="#py-strip" title="Link to this heading">¶</a></h3>
<p>With <code class="docutils literal notranslate"><span class="pre">py:strip</span></code>, you can remove the tag to which the attribute is attached
without removing the content of the tag:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&lt;div&gt;&lt;div py:strip=&quot;True&quot;&gt;Foo&lt;/div&gt;&lt;/div&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">()</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;Foo&lt;/div&gt;</span>
</pre></div>
</div>
<p>As a shorthand, if the value of the <code class="docutils literal notranslate"><span class="pre">py:strip</span></code> attribute is empty, that has
the same effect as using a truth value (i.e. the element is stripped).</p>
</section>
<section id="py-content">
<h3>py:content<a class="headerlink" href="#py-content" title="Link to this heading">¶</a></h3>
<p>With <cite>py:content</cite>, you can remove the tag to which the attribute is attached
without removing the content of the tag:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&lt;div py:content=&quot;content&quot;/&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="s2">&quot;Foo&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;Foo&lt;/div&gt;</span>
</pre></div>
</div>
</section>
<section id="py-replace">
<h3>py:replace<a class="headerlink" href="#py-replace" title="Link to this heading">¶</a></h3>
<p>With <cite>py:replace</cite>, you can replace the entire tag to which the document is
attached and its children:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&lt;div py:replace=&quot;content&quot;/&gt;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">content</span><span class="o">=</span><span class="s2">&quot;Foo&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">Foo</span>
</pre></div>
</div>
</section>
</section>
<section id="inheritance-py-extends-py-block">
<h2>Inheritance (py:extends, py:block)<a class="headerlink" href="#inheritance-py-extends-py-block" title="Link to this heading">¶</a></h2>
<p>Kajiki supports a concept of inheritance whereby child templates can extend
parent templates, replacing their “methods” (functions) and “blocks” (to be defined below).
For instance, consider the following template “parent.xml”:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;div&gt;</span>
<span class="w">   </span><span class="nt">&lt;py:def</span><span class="w"> </span><span class="na">function=</span><span class="s">&quot;greet(name)&quot;</span>
<span class="w">      </span><span class="nt">&gt;</span>Hello,<span class="w"> </span>$name!<span class="nt">&lt;/py:def&gt;</span>
<span class="w">   </span><span class="nt">&lt;py:def</span><span class="w"> </span><span class="na">function=</span><span class="s">&quot;sign(name)&quot;</span>
<span class="w">      </span><span class="nt">&gt;</span>Sincerely,<span class="nt">&lt;br/&gt;</span>
<span class="w">      </span><span class="nt">&lt;em&gt;</span>$name<span class="nt">&lt;/em&gt;&lt;/py:def&gt;</span>
<span class="w">   </span>${greet(to)}

<span class="w">   </span><span class="nt">&lt;p</span><span class="w"> </span><span class="na">py:block=</span><span class="s">&quot;body&quot;</span><span class="nt">&gt;</span>It<span class="w"> </span>was<span class="w"> </span>good<span class="w"> </span>seeing<span class="w"> </span>you<span class="w"> </span>last<span class="w"> </span>Friday.
<span class="w">   </span>Thanks<span class="w"> </span>for<span class="w"> </span>the<span class="w"> </span>gift!<span class="nt">&lt;/p&gt;</span>

<span class="w">   </span>${sign(from_)}
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<p>This would render to something similar to the following (assuming a context of
<cite>dict(to=Mark, from_=Rick)</cite>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;div&gt;</span>
<span class="w">   </span>Hello,<span class="w"> </span>Mark!

<span class="w">   </span><span class="nt">&lt;p&gt;</span>It<span class="w"> </span>was<span class="w"> </span>good<span class="w"> </span>seeing<span class="w"> </span>you<span class="w"> </span>last<span class="w"> </span>friday.
<span class="w">   </span>Thanks<span class="w"> </span>for<span class="w"> </span>the<span class="w"> </span>gift!<span class="nt">&lt;/p&gt;</span>

<span class="w">   </span>Sincerely,<span class="w"> </span><span class="nt">&lt;br/&gt;</span>
<span class="w">   </span>Rick
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<p>Now we can extend “parent.xml” with “child.xml”:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;py:extends</span><span class="w"> </span><span class="na">href=</span><span class="s">&quot;parent.xml&quot;</span><span class="nt">&gt;</span>
<span class="w">   </span><span class="nt">&lt;py:def</span><span class="w"> </span><span class="na">function=</span><span class="s">&quot;greet(name)&quot;</span>
<span class="w">   </span><span class="nt">&gt;</span>Dear<span class="w"> </span>$name:<span class="nt">&lt;/py:def&gt;</span>
<span class="w">   </span><span class="nt">&lt;py:block</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;body&quot;</span><span class="nt">&gt;</span>${parent_block()}
<span class="w">   </span><span class="nt">&lt;p&gt;</span>And<span class="w"> </span>don&#39;t<span class="w"> </span>forget<span class="w"> </span>you<span class="w"> </span>owe<span class="w"> </span>me<span class="w"> </span>money!<span class="nt">&lt;/p&gt;</span>
<span class="w">   </span><span class="nt">&lt;/py:block&gt;</span>
<span class="nt">&lt;/py:extends&gt;</span>
</pre></div>
</div>
<p>Rendering this template would then give us:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;div&gt;</span>
<span class="w">   </span>Dear,<span class="w"> </span>Mark:

<span class="w">   </span><span class="nt">&lt;p&gt;</span>It<span class="w"> </span>was<span class="w"> </span>good<span class="w"> </span>seeing<span class="w"> </span>you<span class="w"> </span>last<span class="w"> </span>friday.
<span class="w">   </span>Thanks<span class="w"> </span>for<span class="w"> </span>the<span class="w"> </span>gift!<span class="nt">&lt;/p&gt;</span>
<span class="w">   </span><span class="nt">&lt;p&gt;</span>And<span class="w"> </span>don&#39;t<span class="w"> </span>forget<span class="w"> </span>you<span class="w"> </span>owe<span class="w"> </span>me<span class="w"> </span>money!<span class="nt">&lt;/p&gt;</span>

<span class="w">   </span>Sincerely,<span class="w"> </span><span class="nt">&lt;br/&gt;</span>
<span class="w">   </span>Rick
<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<p>Notice how in the child block, we have overridden both the block “body” and the
function “greet.”  When overriding a block, we always have access to the parent
template’s block of the same name via the <cite>parent_block()</cite> function.</p>
<p>If you ever need to access the parent template itself (perhaps to call another
function), kajiki provides access to a special variable in child templates
<cite>parent</cite>.  Likewise, if a template is being extended, the variable <cite>child</cite> is
available.  Kajiki also provides the special variables <cite>local</cite> (the template
currently being defined) and <cite>self</cite> (the child-most template of an inheritance
chain).  The following example illustrates these variables in a 3-level
inheritance hierarchy:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parent</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;&lt;div</span>
<span class="gp">... </span><span class="s1">&gt;&lt;h1 py:def=&quot;header()&quot;&gt;Header name=$name&lt;/h1</span>
<span class="gp">... </span><span class="s1">&gt;&lt;h6 py:def=&quot;footer()&quot;&gt;Footer&lt;/h6</span>
<span class="gp">... </span><span class="s1">&gt;&lt;div py:def=&quot;body()&quot;&gt;</span>
<span class="gp">... </span><span class="s1">id() = ${id()}</span>
<span class="gp">... </span><span class="s1">local.id() = ${local.id()}</span>
<span class="gp">... </span><span class="s1">self.id() = ${self.id()}</span>
<span class="gp">... </span><span class="s1">child.id() = ${child.id()}</span>
<span class="gp">... </span><span class="s1">&lt;/div&gt;&lt;span py:def=&quot;id()&quot;&gt;parent&lt;/span&gt;</span>
<span class="gp">... </span><span class="s1">${header()}</span>
<span class="gp">... </span><span class="s1">${body()}</span>
<span class="gp">... </span><span class="s1">${footer()}</span>
<span class="gp">... </span><span class="s1">&lt;/div&gt;&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mid</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;&lt;py:extends href=&quot;parent.html&quot;</span>
<span class="gp">... </span><span class="s1">&gt;&lt;span py:def=&quot;id()&quot;&gt;mid&lt;/span</span>
<span class="gp">... </span><span class="s1">&gt;&lt;/py:extends&gt;&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">child</span><span class="o">=</span><span class="n">kajiki</span><span class="o">.</span><span class="n">XMLTemplate</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;&lt;py:extends href=&quot;mid.html&quot;</span>
<span class="gp">... </span><span class="s1">&gt;&lt;span py:def=&quot;id()&quot;&gt;child&lt;/span</span>
<span class="gp">... </span><span class="s1">&gt;&lt;div py:def=&quot;body()&quot;&gt;</span>
<span class="gp">... </span><span class="s1">&lt;h2&gt;Child Body&lt;/h2&gt;</span>
<span class="gp">... </span><span class="s1">${parent.body()}</span>
<span class="gp">... </span><span class="s1">&lt;/div&gt;&lt;/py:extends&gt;&#39;&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">loader</span> <span class="o">=</span> <span class="n">kajiki</span><span class="o">.</span><span class="n">MockLoader</span><span class="p">({</span>
<span class="gp">... </span><span class="s1">&#39;parent.html&#39;</span><span class="p">:</span><span class="n">parent</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;mid.html&#39;</span><span class="p">:</span><span class="n">mid</span><span class="p">,</span>
<span class="gp">... </span><span class="s1">&#39;child.html&#39;</span><span class="p">:</span><span class="n">child</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Template</span> <span class="o">=</span> <span class="n">loader</span><span class="o">.</span><span class="n">import_</span><span class="p">(</span><span class="s1">&#39;child.html&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">Template</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Rick&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">render</span><span class="p">())</span>
<span class="go">&lt;div&gt;</span>
<span class="go">&lt;h1&gt;Header name=Rick&lt;/h1&gt;</span>
<span class="go">&lt;div&gt;</span>
<span class="go">&lt;h2&gt;Child Body&lt;/h2&gt;</span>
<span class="go">&lt;div&gt;</span>
<span class="go">id() = &lt;span&gt;child&lt;/span&gt;</span>
<span class="go">local.id() = &lt;span&gt;parent&lt;/span&gt;</span>
<span class="go">self.id() = &lt;span&gt;child&lt;/span&gt;</span>
<span class="go">child.id() = &lt;span&gt;mid&lt;/span&gt;</span>
<span class="go">&lt;/div&gt;</span>
<span class="go">&lt;/div&gt;</span>
<span class="go">&lt;h6&gt;Footer&lt;/h6&gt;</span>
<span class="go">&lt;/div&gt;</span>
</pre></div>
</div>
</section>
<section id="summary-of-directives">
<h2>Summary of Directives<a class="headerlink" href="#summary-of-directives" title="Link to this heading">¶</a></h2>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Directive</p></th>
<th class="head"><p>Usable as an attribute</p></th>
<th class="head"><p>Usable as a separate element</p></th>
<th class="head"><p>When used as a separate element, requires attributes named</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>py:if</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td><p>test</p></td>
</tr>
<tr class="row-odd"><td><p>py:else</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>py:switch</p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>test</p></td>
</tr>
<tr class="row-odd"><td><p>py:match</p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>on</p></td>
</tr>
<tr class="row-even"><td><p>py:case</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td><p>value or match (for usage with py:switch or py:match)</p></td>
</tr>
<tr class="row-odd"><td><p>py:for</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td><p>each</p></td>
</tr>
<tr class="row-even"><td><p>py:def</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td><p>function</p></td>
</tr>
<tr class="row-odd"><td><p>py:call</p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>args, function</p></td>
</tr>
<tr class="row-even"><td><p>py:include</p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>href</p></td>
</tr>
<tr class="row-odd"><td><p>py:import</p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>href</p></td>
</tr>
<tr class="row-even"><td><p>py:with</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td><p>vars</p></td>
</tr>
<tr class="row-odd"><td><p>py:attrs</p></td>
<td><p>✅</p></td>
<td><p>❌</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>py:strip</p></td>
<td><p>✅</p></td>
<td><p>❌</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>py:content</p></td>
<td><p>✅</p></td>
<td><p>❌</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>py:replace</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td><p>value</p></td>
</tr>
<tr class="row-odd"><td><p>py:extends</p></td>
<td><p>❌</p></td>
<td><p>✅</p></td>
<td><p>href</p></td>
</tr>
<tr class="row-even"><td><p>py:block</p></td>
<td><p>✅</p></td>
<td><p>✅</p></td>
<td><p>name</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="built-in-functions">
<h2>Built-in functions<a class="headerlink" href="#built-in-functions" title="Link to this heading">¶</a></h2>
<p>The following functions are available by default in template code,
in addition to the standard built-ins that are available to all Python code.</p>
<section id="defined-name">
<h3>defined(name)<a class="headerlink" href="#defined-name" title="Link to this heading">¶</a></h3>
<p>This function determines whether a variable of the specified name exists in the context data, and returns True if it does.</p>
<p>When would you use it? Well, suppose you tried the following template snippet:</p>
<blockquote>
<div><p>&lt;h3 py:if=’user’&gt;$user.name&lt;/h3&gt;</p>
</div></blockquote>
<p>If you don’t pass, from your python code, a “user” variable to the template,
the above code will fail with this exception:
<code class="docutils literal notranslate"><span class="pre">NameError:</span> <span class="pre">global</span> <span class="pre">name</span> <span class="pre">'user'</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">defined</span></code>. This is undesired!</p>
<p>Following Genshi, Kajiki offers the <code class="docutils literal notranslate"><span class="pre">defined()</span></code> function to make
that condition possible, so you can write this:</p>
<blockquote>
<div><p>&lt;h3 py:if=”defined(‘user’)”&gt;$user.name&lt;/h3&gt;</p>
</div></blockquote>
</section>
<section id="literal-text">
<h3>literal(text)<a class="headerlink" href="#literal-text" title="Link to this heading">¶</a></h3>
<p>All good templating languages escape text by default to avoid certain attacks.
But sometimes you have an HTML snippet that you wish to include in a page,
and you know the HTML is safe.</p>
<p>The literal() function marks a given string as being safe for inclusion,
meaning it will not be escaped in the serialization stage. Use this with care,
as not escaping a user-provided string may allow malicious users to open
your web site to cross-site scripting attacks. Example:</p>
<blockquote>
<div><p>${literal(name_of_the_variable_containing_the_html)}</p>
</div></blockquote>
<p>Kajiki is a reimplementation of most of Genshi and, since Genshi has a
<code class="docutils literal notranslate"><span class="pre">Markup()</span></code> function for the same purpose, we provide <code class="docutils literal notranslate"><span class="pre">Markup()</span></code> as a
synonym, too.</p>
</section>
<section id="value-of-name-default-none">
<h3>value_of(name, default=None)<a class="headerlink" href="#value-of-name-default-none" title="Link to this heading">¶</a></h3>
<p>This function returns the value of the variable with the specified name
if such a variable is defined, and returns the value of the default parameter
if no such variable is defined.</p>
<p>Genshi has this, too. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;div py:if=&quot;value_of(&#39;explanation&#39;)&quot;&gt;${explanation}&lt;/div&gt;
</pre></div>
</div>
<p>In the above example, the div will only appear in the output if the
<code class="docutils literal notranslate"><span class="pre">explanation</span></code> variable exists in the context and has a truish value.
(Remember in Python, None and the empty string are not truish, they are
evaluated as False.)</p>
</section>
</section>
<section id="tips-on-writing-your-templates">
<h2>Tips on writing your templates<a class="headerlink" href="#tips-on-writing-your-templates" title="Link to this heading">¶</a></h2>
<p>Kajiki takes XML as input, with the exception that it recognizes HTML entities
in addition to XML entities. (HTML has many more entities than XML;
for instance, XML does not define <code class="docutils literal notranslate"><span class="pre">&amp;nbsp</span></code>).</p>
<p>If your template contains complex content in <code class="docutils literal notranslate"><span class="pre">&lt;style&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code> tags,
you should either:</p>
<ol class="arabic">
<li><p>Externalize these contents onto their own files, or</p></li>
<li><p>Remembering that Kajiki takes XML as input, use CDATA sections inside
these tags in order to escape characters that are illegal in XML, such as
<code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>. Here is an example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;style&gt;&lt;![CDATA[
    html &gt; body { display: none; }
]]&gt;&lt;/style&gt;
&lt;script&gt;&lt;![CDATA[
    if (1 &lt; 2) { document.write(&quot;&lt;p&gt;Albatross!!!&lt;/p&gt;&quot;); }
]]&gt;&lt;/script&gt;
</pre></div>
</div>
</li>
</ol>
<p>This is not necessary when you are writing HTML because HTML defines that the
content of <code class="docutils literal notranslate"><span class="pre">&lt;style&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code> tags is CDATA by default. However,
Kajiki takes XML as input.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="text-templates.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Kajiki Text Templates</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="templating-basics.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Kajiki Templating Basics</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2010-2021, Rick Copeland, Nando Florestan, Alessandro Molina, and Jack Rosenthal
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Kajiki XML Templates</a><ul>
<li><a class="reference internal" href="#output-modes">Output Modes</a></li>
<li><a class="reference internal" href="#basic-expressions">Basic Expressions</a></li>
<li><a class="reference internal" href="#control-flow">Control Flow</a><ul>
<li><a class="reference internal" href="#py-if-py-else">py:if, py:else</a></li>
<li><a class="reference internal" href="#py-switch-py-case-py-else">py:switch, py:case, py:else</a></li>
<li><a class="reference internal" href="#py-match-py-case">py:match, py:case</a></li>
<li><a class="reference internal" href="#py-for">py:for</a></li>
<li><a class="reference internal" href="#py-def">py:def</a></li>
<li><a class="reference internal" href="#py-call">py:call</a></li>
<li><a class="reference internal" href="#py-include">py:include</a></li>
<li><a class="reference internal" href="#py-import">py:import</a><ul>
<li><a class="reference internal" href="#py-with">py:with</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#content-generation">Content Generation</a><ul>
<li><a class="reference internal" href="#py-attrs">py:attrs</a></li>
<li><a class="reference internal" href="#py-strip">py:strip</a></li>
<li><a class="reference internal" href="#py-content">py:content</a></li>
<li><a class="reference internal" href="#py-replace">py:replace</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inheritance-py-extends-py-block">Inheritance (py:extends, py:block)</a></li>
<li><a class="reference internal" href="#summary-of-directives">Summary of Directives</a></li>
<li><a class="reference internal" href="#built-in-functions">Built-in functions</a><ul>
<li><a class="reference internal" href="#defined-name">defined(name)</a></li>
<li><a class="reference internal" href="#literal-text">literal(text)</a></li>
<li><a class="reference internal" href="#value-of-name-default-none">value_of(name, default=None)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tips-on-writing-your-templates">Tips on writing your templates</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=1ed6394b"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>